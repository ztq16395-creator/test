<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ffd7e8" />
  <title>咩咩悬赏商店</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg"></div>

  <main class="app" role="application" aria-label="咩咩悬赏商店">
    <header class="topbar">
      <button class="avatar" id="avatarBtn" aria-label="设置头像">
        <img id="avatarImg" alt="" />
        <span class="avatarFallback" id="avatarFallback">👤</span>
      </button>

      <div class="titleWrap">
        <h1 class="title">咩咩悬赏商店</h1>
        <p class="subtitle" id="subtitle">发布任务，奖励自己想要的秩序 ✨</p>
      </div>

      <button class="ghost danger" id="clearBtn" type="button">清空</button>
      <input id="avatarFile" type="file" accept="image/*" hidden />
    </header>

    <section class="stats" aria-label="统计">
      <div class="stat s1"><div class="statNum" id="statOpen">0</div><div class="statLabel">可接单</div></div>
      <div class="stat s2"><div class="statNum" id="statTaken">0</div><div class="statLabel">已接单</div></div>
      <div class="stat s3"><div class="statNum" id="statDone">0</div><div class="statLabel">已完成</div></div>
    </section>

    <section class="actionsRow">
      <button class="primary" id="newBtn" type="button"><span class="plus">＋</span> 新建任务</button>
    </section>

    <nav class="tabs" aria-label="筛选">
      <button class="tab active" data-tab="all">全部</button>
      <button class="tab" data-tab="open">可接单</button>
      <button class="tab" data-tab="taken">已接单</button>
      <button class="tab" data-tab="done">已完成</button>
      <button class="tab" data-tab="canceled">已取消</button>
    </nav>

    <section class="list" aria-label="任务列表">
      <div id="emptyState" class="empty">
        <div class="sheep">🐑</div>
        <div class="emptyTitle">暂无任务</div>
        <div class="emptyHint">点“新建任务”发布一个悬赏吧～</div>
      </div>
      <div id="taskList" class="taskList"></div>
    </section>
  </main>

  <div class="modalOverlay" id="modalOverlay" hidden>
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalHeader">
        <h2 id="modalTitle">发布悬赏</h2>
        <button class="iconBtn" id="closeModal" aria-label="关闭">✕</button>
      </div>

      <form id="taskForm" class="form">
        <label class="field">
          <span class="label">任务名称</span>
          <input id="nameInput" type="text" maxlength="40" placeholder="例如：洗衣服" required>
        </label>

        <div class="grid2">
          <label class="field">
            <span class="label">悬赏金额 (¥)</span>
            <input id="moneyInput" type="number" min="0" step="1" placeholder="20" required>
          </label>

          <div class="field">
            <span class="label">难度星级</span>
            <div class="stars" id="starPicker" aria-label="选择难度（满星 6 颗）"></div>
          </div>
        </div>

        <label class="field">
          <span class="label">任务详情</span>
          <textarea id="detailInput" rows="5" maxlength="500" placeholder="描述具体的任务要求..."></textarea>
        </label>

        <button class="primary wide" type="submit">发布</button>
      </form>
    </div>
  </div>

  <template id="taskTpl">
    <article class="card">
      <div class="cardTop">
        <h3 class="cardTitle"></h3>
        <span class="chip status"></span>
      </div>

      <div class="meta">
        <span class="badge money"></span>
        <div class="starRow" aria-label="难度"></div>
      </div>

      <p class="desc"></p>

      <div class="cardActions">
        <button class="ghost" data-action="take">接单</button>
        <button class="ghost" data-action="done">完成</button>
        <button class="ghost danger" data-action="cancel">取消</button>
        <button class="ghost" data-action="reopen">重新上架</button>
        <button class="ghost danger" data-action="delete">删除</button>
      </div>
    </article>
  </template>

  <script src="script.js"></script>
</body>
</html>
